/* version 0.0.7 http://garlicjs.org */
!function(a){"use strict";var b=function(){this.defined="undefined"!=typeof localStorage?!0:!1};b.prototype={constructor:b,get:function(a,b){return localStorage.getItem(a)?localStorage.getItem(a):b!==void 0?b:null},has:function(a){return localStorage.getItem(a)?!0:!1},set:function(a,b,c){return localStorage.setItem(a,b),"function"==typeof c?c():!0},destroy:function(a,b){return localStorage.removeItem(a),"function"==typeof b?b():!0},clean:function(a){for(var b=localStorage.length-1;b>=0;b--)-1!==localStorage.key(b).indexOf("garlic:")&&localStorage.removeItem(localStorage.key(b));return"function"==typeof a?a():!0},clear:function(a){return localStorage.clear(),"function"==typeof a?a():!0}};var c=function(a,b,c){this.init("garlic",a,b,c)};c.prototype={constructor:c,init:function(b,c,d,e){this.type=b,this.$element=a(c),this.options=this.getOptions(e),this.storage=d,this.path=this.$element.getPath(),this.retrieve(),this.$element.on(this.options.events.join("."+this.type+" "),!1,a.proxy(this.persist,this)),this.$element.closest("form").on("submit reset",!1,a.proxy(this.destroy,this)),this.$element.addClass("garlic-auto-save")},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data())},persist:function(){if(this.options.storage){if(this.$element.is("input[type=checkbox]")&&this.storage.has(this.path))return this.destroy(),void 0;this.storage.set(this.path,this.$element.val())}},retrieve:function(){if(this.storage.has(this.path)){if(this.$element.is("input[type=radio], input[type=checkbox]"))return this.storage.get(this.path)===this.$element.val()&&this.$element.attr("checked","checked"),void 0;this.$element.val(this.storage.get(this.path))}},destroy:function(){this.$element.is("input[type=radio], input[type=checkbox]")&&this.$element.attr("checked",!1),this.storage.destroy(this.path)},remove:function(){this.remove(),this.$element.val("")}},a.fn.getPath=function(){if(this.length!=1)return!1;var b,c=this;while(c.length){var d=c[0],e=d.localName;if(!e||"body"==e)break;e=e.toLowerCase();var f=c.parent(),g=f.children(e);if(g.length>1&&!a(d).is("input[type=radio]")?e+=":eq("+g.index(d)+")":a(d).is("input[type=radio]")&&(e+="#"+a(d).attr("name")),b=e+(b?">"+b:""),"form"==d.localName)break;c=f}return"garlic:"+document.domain+">"+b},a.fn.garlic=function(d){function g(b){var g=a(b),h=g.data("garlic");h||g.data("garlic",h=new c(b,f,e)),typeof d=="string"&&h[d]!==void 0&&h[d]()}var e=a.extend({},a.fn.garlic.defaults,d,this.data()),f=new b;return f.defined?(e.debug&&(window.garlicStorage=f),this.each(function(){a(this).is("form")?a(this).find(e.inputs).each(function(){g(a(this))}):a(this).is(e.inputs)&&g(a(this))})):!1},a.fn.garlic.Constructor=c,a.fn.garlic.defaults={debug:!1,storage:!0,inputs:"input[type=text], input[type=radio], input[type=checkbox], textarea, select",events:["DOMAttrModified","textInput","input","change","keypress","paste","focus"]},a(window).on("load",function(){a('[data-persist="garlic"]').each(function(){a(this).garlic()})})}(window.jQuery||Zepto)